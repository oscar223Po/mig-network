function __awaiter(a,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function l(c){try{h(i.next(c))}catch(n){o(n)}}function p(c){try{h(i.throw(c))}catch(n){o(n)}}function h(c){c.done?r(c.value):s(c.value).then(l,p)}h((i=i.apply(a,[])).next())})}typeof SuppressedError=="function"&&SuppressedError;function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,s,r;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(s=i;s--!==0;)if(!a(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),i=r.length,i!==Object.keys(t).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[s]))return!1;for(s=i;s--!==0;){var o=r[s];if(!a(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual(),isEqual=getDefaultExportFromCjs(fastDeepEqualExports);const DEFAULT_ID="__googleMapsScriptId";var LoaderStatus;(function(a){a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE"})(LoaderStatus||(LoaderStatus={}));class Loader{constructor({apiKey:e,authReferrerPolicy:t,channel:i,client:s,id:r=DEFAULT_ID,language:o,libraries:l=[],mapIds:p,nonce:h,region:c,retries:n=3,url:u="https://maps.googleapis.com/maps/api/js",version:y}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=i,this.client=s,this.id=r||DEFAULT_ID,this.language=o,this.libraries=l,this.mapIds=p,this.nonce=h,this.region=c,this.retries=n,this.url=u,this.version=y,Loader.instance){if(!isEqual(this.options,Loader.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Loader.instance.options)}`);return Loader.instance}Loader.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?LoaderStatus.FAILURE:this.done?LoaderStatus.SUCCESS:this.loading?LoaderStatus.LOADING:LoaderStatus.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(i=>{i?t(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(r=>!i[r]&&delete i[r]),!((t=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(r=>{let o,l,p,h="The Google Maps JavaScript API",c="google",n="importLibrary",u="__ib__",y=document,m=window;m=m[c]||(m[c]={});const f=m.maps||(m.maps={}),E=new Set,g=new URLSearchParams,v=()=>o||(o=new Promise((d,b)=>__awaiter(this,void 0,void 0,function*(){var w;yield l=y.createElement("script"),l.id=this.id,g.set("libraries",[...E]+"");for(p in r)g.set(p.replace(/[A-Z]/g,I=>"_"+I[0].toLowerCase()),r[p]);g.set("callback",c+".maps."+u),l.src=this.url+"?"+g,f[u]=d,l.onerror=()=>o=b(Error(h+" could not load.")),l.nonce=this.nonce||((w=y.querySelector("script[nonce]"))===null||w===void 0?void 0:w.nonce)||"",y.head.append(l)})));f[n]?console.warn(h+" only loads once. Ignoring:",r):f[n]=(d,...b)=>E.add(d)&&v().then(()=>f[n](d,...b))})(i);const s=this.libraries.map(r=>this.importLibrary(r));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),r=>{const o=new ErrorEvent("error",{error:r});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const MAP_KEY="",MAP_STYLES=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#B1AEAE"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#E5E2E2"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-100},{lightness:45}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#D6D3D3"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#CECBCB"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#B0AEAE"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#E4E1E1"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"},{saturation:-100}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"on"},{saturation:-100},{lightness:50}]},{featureType:"water",elementType:"all",stylers:[{color:"#D0CDCD"},{visibility:"on"}]}];function mapInit(){const a={section:"[data-fls-map]",marker:"[data-fls-map-marker]",map:"[data-fls-map-body]"},e=document.querySelectorAll(a.section);if(!e.length)return;const t=async s=>{const r=new Loader({apiKey:MAP_KEY,version:"weekly",libraries:["places"]});try{const{Map:o}=await r.importLibrary("maps"),{AdvancedMarkerElement:l}=await r.importLibrary("marker"),p=await r.importLibrary("core");s({Map:o,AdvancedMarkerElement:l,Core:p})}catch(o){console.log(o)}},i=async({api:s,lng:r,lat:o,markersData:l,zoom:p,maxZoom:h,$map:c})=>{const n={maxZoom:h,zoom:p,mapTypeControl:!1,styles:MAP_STYLES,center:{lat:o,lng:r},disableDefaultUI:!0,mapId:"DEMO_MAP_ID"},u=new s.Map(c,n);return await l.map(({lat:y,lng:m,icon:f,title:E,markerZoom:g,markerPopup:v})=>{let d;f&&(d=document.createElement("img"),d.src=f);const b=new s.AdvancedMarkerElement({map:u,title:E,gmpClickable:!0,position:new s.Core.LatLng(y,m),content:f?d:null});return b.addEventListener("gmp-click",()=>{g.enable&&u.setZoom(+g.value||10),v.enable&&window.flsPopup&&window.flsPopup.open(v.value),u.panTo(b.position)}),b}),u};t(s=>{e.forEach(r=>{const o=r.querySelectorAll(a.map);o.length&&o.forEach(l=>{const p=l.parentElement.querySelectorAll(a.marker),h=Array.from(p).map(n=>({lng:parseFloat(n.dataset.flsMapLng)||0,lat:parseFloat(n.dataset.flsMapLat)||0,icon:n.dataset.flsMapIcon,title:n.dataset.flsMapTitle,markerZoom:{enable:n.hasAttribute("data-fls-map-marker-zoom"),value:n.dataset.flsMapMarkerZoom},markerPopup:{enable:n.hasAttribute("data-fls-map-marker-popup"),value:n.dataset.flsMapMarkerPopup}})),c=i({api:s,$map:l,lng:parseFloat(l.dataset.flsMapLng)||0,lat:parseFloat(l.dataset.flsMapLat)||0,zoom:parseFloat(l.dataset.flsMapZoom)||6,maxZoom:parseFloat(l.dataset.flsMapMaxZoom)||18,markersData:h})})})})}document.querySelector("[data-fls-map]")&&window.addEventListener("load",mapInit);
